{"ast":null,"code":"var _jsxFileName = \"/Users/tatsuyafujii/project/chatbot/src/App.jsx\",\n    _s2 = $RefreshSig$();\n\nimport React, { useCallback, useState, useEffect } from 'react';\nimport './assets/styles/style.css';\nimport { AnswersList, Chats } from \"./components\";\nimport FormDialog from \"./components/Forms/FormDialog\";\nimport { db } from './firebase/index';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const [answers, setAnswers] = useState([]);\n  const [chats, setChats] = useState([]);\n  const [currentId, setCurrentId] = useState(\"init\");\n  const [dataset, setDataset] = useState({});\n  const [open, setOpen] = useState(false);\n\n  const displayNextQuestion = (nextQuestionId, nextDataset) => {\n    addChats({\n      text: nextDataset.question,\n      type: 'question'\n    });\n    setAnswers(nextDataset.answers);\n    setCurrentId(nextQuestionId);\n  };\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = useCallback(() => {\n    setOpen(false);\n  }, [setOpen]);\n\n  const addChats = chat => {\n    _s();\n\n    setChats(prevChats => {\n      return [...prevChats, chat];\n    });\n\n    const selectAnswer = (selectedAnswer, nextQuestionId) => {\n      switch (true) {\n        case /^https:*/.test(nextQuestionId):\n          const a = document.createElement('a');\n          a.href = nextQuestionId;\n          a.target = '_blank';\n          a.click();\n          break;\n\n        case nextQuestionId === 'contact':\n          handleClickOpen();\n          break;\n\n        default:\n          addChats({\n            text: selectedAnswer,\n            type: 'answer'\n          });\n          setTimeout(() => this.displayNextQuestion(nextQuestionId, dataset[nextQuestionId]), 500);\n          break;\n      }\n    };\n\n    useEffect(() => {\n      const scrollArea = document.getElementById('scroll-area');\n\n      if (scrollArea) {\n        scrollArea.scrollTop = scrollArea.scrollHeight;\n      }\n    });\n    useEffect(() => {\n      (async () => {\n        const initDataset = {};\n        await db.collection(\"questions\").get().then(snapshots => {\n          snapshots.forEach(doc => {\n            const id = doc.id;\n            const data = doc.data();\n            initDataset[id] = data;\n          });\n        });\n        setDataset(initDataset);\n        displayNextQuestion(currentId, initDataset[currentId]);\n      })();\n    }, []);\n  };\n\n  _s(addChats, \"3ubReDTFssvu4DHeldAg55cW/CI=\");\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"c-section\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c-box\",\n      children: [/*#__PURE__*/_jsxDEV(Chats, {\n        chats: chats\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(AnswersList, {\n        answers: answers,\n        select: selectAnswer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(FormDialog, {\n        open: open,\n        handleClose: handleClose\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 13\n  }, this);\n};\n\n_s2(App, \"aRZu2cSszNMKb+ABeaxiP4M056c=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/tatsuyafujii/project/chatbot/src/App.jsx"],"names":["React","useCallback","useState","useEffect","AnswersList","Chats","FormDialog","db","App","answers","setAnswers","chats","setChats","currentId","setCurrentId","dataset","setDataset","open","setOpen","displayNextQuestion","nextQuestionId","nextDataset","addChats","text","question","type","handleClickOpen","handleClose","chat","prevChats","selectAnswer","selectedAnswer","test","a","document","createElement","href","target","click","setTimeout","scrollArea","getElementById","scrollTop","scrollHeight","initDataset","collection","get","then","snapshots","forEach","doc","id","data"],"mappings":"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","sourcesContent":["import React, {useCallback, useState, useEffect} from 'react';\nimport './assets/styles/style.css';\nimport {AnswersList, Chats} from \"./components\";\nimport FormDialog from \"./components/Forms/FormDialog\";\nimport {db} from './firebase/index'\n\nconst App = () => {\n    const [answers, setAnswers] = useState([]);\n    const [chats, setChats] = useState([]);\n    const [currentId, setCurrentId] = useState(\"init\");\n    const [dataset, setDataset] = useState({});\n    const [open, setOpen] = useState(false);\n\n\n    const displayNextQuestion = (nextQuestionId, nextDataset) => {\n        addChats({\n            text:nextDataset.question,\n            type: 'question'\n        })\n\n        setAnswers(nextDataset.answers)\n        setCurrentId(nextQuestionId)\n\n    }\n\n    const handleClickOpen = () => {\n        setOpen(true)\n    };\n\n    const handleClose =  useCallback(() =>  {\n        setOpen(false)\n    },[setOpen]);\n\n    const addChats = (chat) => {\n        setChats(prevChats => {\n            return [...prevChats, chat]\n        })\n\n    const selectAnswer = (selectedAnswer, nextQuestionId) => {\n        switch (true){\n\n            case (/^https:*/.test(nextQuestionId)):\n                const a = document.createElement('a');\n                a.href = nextQuestionId;\n                a.target = '_blank';\n                a.click();\n                break;\n\n            case (nextQuestionId === 'contact'):\n                handleClickOpen();\n                break;\n\n            default:\n                addChats({\n                    text: selectedAnswer,\n                    type: 'answer'\n                })\n\n                setTimeout(() => this.displayNextQuestion(nextQuestionId,dataset[nextQuestionId]), 500);\n                break;\n        }\n    }\n\n    useEffect(() => {\n        const scrollArea = document.getElementById('scroll-area');\n        if (scrollArea){\n            scrollArea.scrollTop = scrollArea.scrollHeight;\n        }\n    })\n\n    useEffect( () => {\n        (async () => {\n            const initDataset = {};\n\n            await db.collection(\"questions\").get().then(snapshots => {\n                snapshots.forEach(doc => {\n                    const id = doc.id\n                    const data = doc.data()\n                    initDataset[id] = data\n                })\n            })\n\n            setDataset(initDataset)\n            displayNextQuestion(currentId, initDataset[currentId])\n        })()\n    },[])\n\n    }\n\n    return (\n            <section className={\"c-section\"}>\n                <div className={\"c-box\"}>\n                    <Chats chats={chats}/>\n                    <AnswersList answers={answers} select={selectAnswer}/>\n                    <FormDialog open={open} handleClose={handleClose}/>\n                </div>\n            </section>\n        );\n\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}