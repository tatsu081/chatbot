{"ast":null,"code":"var _jsxFileName = \"/Users/tatsuyafujii/project/chatbot/src/App.jsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useCallback, useState, useEffect } from 'react';\nimport './assets/styles/style.css';\nimport { AnswersList, Chats } from \"./components\";\nimport FormDialog from \"./components/Forms/FormDialog\";\nimport { db } from './firebase/index';\nimport { addDataset } from \"../functions/src\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [answers, setAnswers] = useState([]);\n  const [chats, setChats] = useState([]);\n  const [currentId, setCurrentId] = useState([\"init\"]);\n  const [dataset, setDataset] = useState([]);\n  const [open, setOpen] = useState([false]);\n  this.selectAnswer = this.selectAnswer.bind(this);\n  this.handleClickOpen = this.handleClickOpen.bind(this);\n  this.handleClose = this.handleClose.bind(this);\n};\n\n_s(App, \"mA+VdrQVNOATu7u75WxW8HRNsy0=\");\n\n_c = App;\n\nconst displayNextQuestion = (nextQuestionId, nextDataset) => {\n  addChats({\n    text: this.state.dataset[nextQuestionId].question,\n    type: 'question'\n  });\n  setAnswers(nextDataset.answers);\n  setCurrentId(nextQuestionId);\n  this.setState({\n    answers: this.state.dataset[nextQuestionId].answers,\n    chats: chats,\n    currentId: nextQuestionId\n  });\n};\n\nconst selectAnswer = (selectedAnswer, nextQuestionId) => {\n  switch (true) {\n    case nextQuestionId === 'init':\n      displayNextQuestion(nextQuestionId, dataset[nextQuestionId]);\n      break;\n\n    case /^https:*/.test(nextQuestionId):\n      const a = document.createElement('a');\n      a.href = nextQuestionId;\n      a.target = '_blank';\n      a.click();\n      break;\n\n    case nextQuestionId === 'contact':\n      handleClickOpen();\n      break;\n\n    default:\n      addChats({\n        text: selectedAnswer,\n        type: 'answer'\n      });\n      setState({\n        chats: chats\n      });\n      setTimeout(() => this.displayNextQuestion(nextQuestionId, dataset[nextQuestionId]), 500);\n      break;\n  }\n};\n\nconst addChats = chat => {\n  _s2();\n\n  setChats(prevChats => {\n    return [...prevChats, chats];\n  });\n  useEffect(() => {\n    const scrollArea = document.getElementById('scroll-area');\n\n    if (scrollArea) {\n      scrollArea.scrollTop = scrollArea.scrollHeight;\n    }\n  });\n  useEffect(() => {\n    (async () => {\n      const initDataset = {};\n      await db.collection(\"questions\").get().then(snapshots => {\n        snapshots.forEach(doc => {\n          const id = doc.id;\n          const data = doc.data();\n          initDataset[id] = data;\n        });\n      });\n      setDataset(initDataset);\n      displayNextQuestion(currendId, initDataset[currendId]);\n    })();\n  }, []);\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = useCallback(() => {\n    setOpen(false);\n  }, [setOpen]);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"c-section\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"c-box\",\n      children: [/*#__PURE__*/_jsxDEV(Chats, {\n        chats: chats\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(AnswersList, {\n        answers: answers,\n        select: selectAnswer\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(FormDialog, {\n        open: this.state.open,\n        handleClose: handleClose\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 13\n  }, this);\n};\n\n_s2(addChats, \"WR3Gjiml9sdXest9LQISSPwVyDg=\");\n\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/tatsuyafujii/project/chatbot/src/App.jsx"],"names":["React","useCallback","useState","useEffect","AnswersList","Chats","FormDialog","db","addDataset","App","answers","setAnswers","chats","setChats","currentId","setCurrentId","dataset","setDataset","open","setOpen","selectAnswer","bind","handleClickOpen","handleClose","displayNextQuestion","nextQuestionId","nextDataset","addChats","text","state","question","type","setState","selectedAnswer","test","a","document","createElement","href","target","click","setTimeout","chat","prevChats","scrollArea","getElementById","scrollTop","scrollHeight","initDataset","collection","get","then","snapshots","forEach","doc","id","data","currendId"],"mappings":"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","sourcesContent":["import React, {useCallback, useState, useEffect} from 'react';\nimport './assets/styles/style.css';\nimport {AnswersList, Chats} from \"./components\";\nimport FormDialog from \"./components/Forms/FormDialog\";\nimport {db} from './firebase/index'\nimport {addDataset} from \"../functions/src\";\n\nconst App = () => {\n    const [answers, setAnswers] = useState([]);\n    const [chats, setChats] = useState([]);\n    const [currentId, setCurrentId] = useState([\"init\"]);\n    const [dataset, setDataset] = useState([]);\n    const [open, setOpen] = useState([false]);\n\n        this.selectAnswer = this.selectAnswer.bind(this);\n        this.handleClickOpen = this.handleClickOpen.bind(this);\n        this.handleClose = this.handleClose.bind(this);\n    }\n\n    const displayNextQuestion = (nextQuestionId, nextDataset) => {\n        addChats({\n            text:this.state.dataset[nextQuestionId].question,\n            type: 'question'\n        })\n\n        setAnswers(nextDataset.answers)\n        setCurrentId(nextQuestionId)\n\n        this.setState({\n            answers: this.state.dataset[nextQuestionId].answers,\n            chats: chats,\n            currentId:nextQuestionId\n        })\n    }\n\n    const selectAnswer = (selectedAnswer, nextQuestionId) => {\n        switch (true){\n            case (nextQuestionId === 'init'):\n                displayNextQuestion(nextQuestionId, dataset[nextQuestionId])\n                break;\n\n            case (/^https:*/.test(nextQuestionId)):\n                const a = document.createElement('a');\n                a.href = nextQuestionId;\n                a.target = '_blank';\n                a.click();\n                break;\n\n            case (nextQuestionId === 'contact'):\n                handleClickOpen();\n                break;\n\n            default:\n                addChats({\n                    text: selectedAnswer,\n                    type: 'answer'\n                })\n\n                setState({\n                    chats:chats\n                })\n\n                setTimeout(() => this.displayNextQuestion(nextQuestionId,dataset[nextQuestionId]), 500);\n                break;\n        }\n    }\n\n    const addChats = (chat) => {\n    setChats(prevChats => {\n        return [...prevChats, chats]\n    })\n\n    useEffect(() => {\n        const scrollArea = document.getElementById('scroll-area');\n        if (scrollArea){\n            scrollArea.scrollTop = scrollArea.scrollHeight;\n        }\n    })\n\n    useEffect( () => {\n        (async () => {\n            const initDataset = {};\n\n            await db.collection(\"questions\").get().then(snapshots => {\n                snapshots.forEach(doc => {\n                    const id = doc.id\n                    const data = doc.data()\n                    initDataset[id] = data\n                })\n            })\n\n            setDataset(initDataset)\n            displayNextQuestion(currendId, initDataset[currendId])\n        })()\n    },[])\n\n    const handleClickOpen = () => {\n        setOpen(true)\n    };\n\n    const handleClose =  useCallback(() =>  {\n        setOpen(false)\n    },[setOpen]);\n\n\n        return (\n            <section className={\"c-section\"}>\n                <div className={\"c-box\"}>\n                    <Chats chats={chats}/>\n                    <AnswersList answers={answers} select={selectAnswer}/>\n                    <FormDialog open={this.state.open} handleClose={handleClose}/>\n                </div>\n            </section>\n        );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}