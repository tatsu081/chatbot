{"ast":null,"code":"import _classCallCheck from\"/Users/tatsuyafujii/project/chatbot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/tatsuyafujii/project/chatbot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/tatsuyafujii/project/chatbot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/tatsuyafujii/project/chatbot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/tatsuyafujii/project/chatbot/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./assets/styles/style.css';import defaultDataset from\"./dataset.json\";import{AnswersList,Chats}from\"./components\";import FormDialog from\"./components/Forms/FormDialog\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.displayNextQuestion=function(nextQuestionId){var chats=_this.state.chats;chats.push({text:_this.state.dataset[nextQuestionId].question,type:'question'});_this.setState({answers:_this.state.dataset[nextQuestionId].answers,chats:chats,currentId:nextQuestionId});};_this.selectAnswer=function(selectedAnswer,nextQuestionId){switch(true){case nextQuestionId==='init':_this.displayNextQuestion(nextQuestionId);break;case /^https:*/.test(nextQuestionId):var a=document.createElement('a');a.href=nextQuestionId;a.target='_blank';a.click();break;case nextQuestionId==='contact':_this.handleClickOpen();break;default:var chats=_this.state.chats;chats.push({text:selectedAnswer,type:'answer'});_this.setState({chats:chats});setTimeout(function(){return _this.displayNextQuestion(nextQuestionId);},500);break;}};_this.handleClickOpen=function(){_this.setState({open:true});};_this.handleClose=function(){_this.setState({open:false});};_this.state={answers:[],//回答コンポーネントに表示するデータ\nchats:[],//チャットボットコンポーネントに表示するデータ\ncurrentId:\"init\",//現在の質問とID\ndataset:defaultDataset,//質問と回答のデータセット\nopen:false//問い合わせフォーム用モーダルの開閉を管理\n};_this.selectAnswer=_this.selectAnswer.bind(_assertThisInitialized(_this));_this.handleClickOpen=_this.handleClickOpen.bind(_assertThisInitialized(_this));_this.handleClose=_this.handleClose.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState,snapshot){var scrollArea=document.getElementById('scroll-area');if(scrollArea){scrollArea.scrollTop=scrollArea.scrollHeight;}}},{key:\"componentWillMount\",value:function componentWillMount(){var initAnswer=\"\";this.selectAnswer(initAnswer,this.state.currentId);}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"section\",{className:\"c-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"c-box\",children:[/*#__PURE__*/_jsx(Chats,{chats:this.state.chats}),/*#__PURE__*/_jsx(AnswersList,{answers:this.state.answers,select:this.selectAnswer}),/*#__PURE__*/_jsx(FormDialog,{open:this.state.open,handleClose:this.handleClose})]})});}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/tatsuyafujii/project/chatbot/src/App.jsx"],"names":["React","defaultDataset","AnswersList","Chats","FormDialog","App","props","displayNextQuestion","nextQuestionId","chats","state","push","text","dataset","question","type","setState","answers","currentId","selectAnswer","selectedAnswer","test","a","document","createElement","href","target","click","handleClickOpen","setTimeout","open","handleClose","bind","prevProps","prevState","snapshot","scrollArea","getElementById","scrollTop","scrollHeight","initAnswer","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './assets/styles/style.css';\nimport defaultDataset from \"./dataset.json\";\nimport {AnswersList, Chats} from \"./components\";\nimport FormDialog from \"./components/Forms/FormDialog\";\n\nclass App extends React.Component{\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            answers: [],　　　       //回答コンポーネントに表示するデータ\n            chats: [],　　　　　　　　　//チャットボットコンポーネントに表示するデータ\n            currentId: \"init\",　　　　//現在の質問とID\n            dataset: defaultDataset,　//質問と回答のデータセット\n            open: false　　　　　　　　 //問い合わせフォーム用モーダルの開閉を管理\n        }\n\n        this.selectAnswer = this.selectAnswer.bind(this);\n        this.handleClickOpen = this.handleClickOpen.bind(this);\n        this.handleClose = this.handleClose.bind(this);\n    }\n\n    displayNextQuestion = (nextQuestionId) => {\n        const chats =this.state.chats\n        chats.push({\n            text:this.state.dataset[nextQuestionId].question,\n            type: 'question'\n        })\n\n        this.setState({\n            answers: this.state.dataset[nextQuestionId].answers,\n            chats: chats,\n            currentId:nextQuestionId\n        })\n    }\n\n    selectAnswer = (selectedAnswer, nextQuestionId) => {\n        switch (true){\n            case (nextQuestionId === 'init'):\n                this.displayNextQuestion(nextQuestionId)\n                break;\n\n            case (/^https:*/.test(nextQuestionId)):\n                const a = document.createElement('a');\n                a.href = nextQuestionId;\n                a.target = '_blank';\n                a.click();\n                break;\n\n            case (nextQuestionId === 'contact'):\n                this.handleClickOpen();\n                break;\n\n            default:\n                const chats = this.state.chats;\n                chats.push ({\n                    text: selectedAnswer,\n                    type: 'answer'\n                })\n\n                this.setState({\n                    chats:chats\n                })\n\n                setTimeout(() => this.displayNextQuestion(nextQuestionId), 500);\n                break;\n        }\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot){\n        const scrollArea = document.getElementById('scroll-area');\n        if (scrollArea){\n            scrollArea.scrollTop = scrollArea.scrollHeight;\n        }\n    }\n\n    componentWillMount() {\n        const initAnswer = \"\";\n        this.selectAnswer(initAnswer, this.state.currentId)\n    }\n\n    handleClickOpen = () => {\n        this.setState({open: true});\n    };\n\n    handleClose = () => {\n        this.setState({open: false});\n    };\n\n    render() {\n        return (\n            <section className={\"c-section\"}>\n                <div className={\"c-box\"}>\n                    <Chats chats={this.state.chats}/>\n                    <AnswersList answers={this.state.answers} select={this.selectAnswer}/>\n                    <FormDialog open={this.state.open} handleClose={this.handleClose}/>\n                </div>\n            </section>\n        );\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}